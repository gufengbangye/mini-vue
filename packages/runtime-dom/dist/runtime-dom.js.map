{
  "version": 3,
  "sources": ["../../reactivity/src/effect.ts", "../../shared/src/index.ts", "../../reactivity/src/Dep.ts", "../../reactivity/src/track.ts", "../../reactivity/src/baseHandler.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/apiWatch.ts", "../src/nodeOps.ts", "../src/modules/patchAttr.ts", "../src/modules/patchClass.ts", "../src/modules/patchEvent.ts", "../src/modules/patchStyle.ts", "../src/patchProps.ts", "../src/index.ts"],
  "sourcesContent": ["import { Dep } from \"./Dep\";\nimport { DirtyLevels } from \"./constants\";\n//\u7528\u4E8E\u540E\u7EED\u5C06\u5F53\u524D\u7684effect\u548C\u540E\u7EED\u54CD\u5E94\u5F0F\u6570\u636E\u7684\u6539\u53D8\u5173\u8054\u8D77\u6765 \u6BD4\u5982effect(() => {}) effect\u4F20\u5165\u7684\u51FD\u6570\u5373\u662FactiveEffect \u8FD9\u6837\u6267\u884C\u51FD\u6570\u89E6\u53D1get\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u83B7\u53D6\u5F53\u524D\u5979\u6240\u5728\u7684\u51FD\u6570 \u540E\u7EED\u503C\u6539\u53D8\u7684\u65F6\u5019\u5728\u89E6\u53D1\u4E00\u4E0B\u8FD9\u4E2Afn\u5373\u53EF\nexport type activeEffect = void | ReactiveEffect;\nexport let activeEffect: activeEffect; //\u8054\u5408\u7C7B\u578B\u91CC\u51FD\u6570\u9700\u8981\u88AB\u62EC\u53F7\u62EC\u8D77\u6765\nexport const reactiveEffectMap = new WeakMap();\ntype ReactiveEffectOptions = {\n  scheduler: () => void;\n};\nexport class ReactiveEffect {\n  _trackId = 0;\n  _deps: Dep[] = []; //\u7528\u4E8E\u5B58\u653E\u5F53\u524Deffect\u91CC\u6709\u591A\u5C11\u4E2Adep\n  _depsLength = 0; //\u4E3B\u8981\u7528\u4E8E\u8BB0\u5F55\u4E0A\u4E00\u6B21\u4F9D\u8D56\u7684\u4E2A\u6570 \u540E\u7EED\u901A\u8FC7\u6BD4\u8F83\u65B0\u8001length \u5220\u9664\u591A\u4F59\u7684\u4F9D\u8D56\n  private parent?: activeEffect;\n  _dirtyLevel: number = DirtyLevels.Dirty;\n  isRunning = 0;\n  constructor(private fn: () => void, private scheduler: () => void) {} //\u4F1A\u88AB\u8F6C\u5316\u4E3Aconstructor(){this.fn = fn}\n  _run() {\n    //\u5F53\u524D\u4EE3\u7801\u6709\u4E2A\u95EE\u9898\u5C31\u662F\u5F53\u5D4C\u5957\u7684effect\u4F1A\u51FA\u73B0\u95EE\u9898\n    //\u4EE3\u7801\u4F8B\u5B50\n    // import { reactive, effect } from \"./reactivity.js\";\n    // const target = {\n    //   name: 1,\n    //   pink: 2,\n    //   address: 3,\n    // };\n    // const state = reactive(target);\n    // effect(() => {\n    //   console.log(state.name); //\u5F53\u524DactiveEffect\u5BF9\u5E94\u7684\u662F\u5F53\u524D\u7684effect\n    //     effect(() => {\n    //   console.log(state.address);//\u5F53\u524DactiveEffect\u5BF9\u5E94\u7684\u662F\u5F53\u524D\u7684effect\u4F46\u662F\u6267\u884C\u5B8C\u8FD9\u53E5activeEffect\u4F1A\u53D8\u6210undefined\n    // })\n    //   console.log(state.pink); //\u8FD9\u4E2A\u65F6\u5019\u8FD9\u4E2A\u91CC\u5BF9\u5E94\u7684activeEffect\u4E3Aundefined\n    // });\n    preClean(this);\n    try {\n      //\u6BCF\u6B21\u8FDB\u6765\u90FD\u8981\u5C06parent\u8BBE\u7F6E\u4E3A\u4E0A\u4E00\u4E2AactiveEffect\n      this.parent = activeEffect;\n      activeEffect = this;\n      this.isRunning++; //\u540E\u7EED\u5728\u6267\u884C\u65F6\u6839\u636E\u8BE5\u503C\u662F\u5426\u4E3A0\u5224\u65AD\n      this.dirty = false; //\u6BCF\u6B21\u53EA\u6539\u53D8\u90FD\u9700\u8981\u5C06\u8FD9\u4E2A\u503C\u5F04\u6210\u4E0D\u810F \u56E0\u4E3A\u503C\u6539\u53D8\u540E\u53EA\u6267\u884C\u4E00\u4E0Bcomputed\u540E\u7EED\u8D70\u7F13\u5B58\n      return this.fn();\n    } finally {\n      this.isRunning--;\n      //\u79FB\u9664deps\u91CC\u591A\u4F59\u7684 \u7531\u4E8E\u6BCF\u4E00\u6B21effect\u4F1A\u5BFC\u81F4\u4E0D\u540C\u7684dep\u90FD\u88AB\u63A8\u5165\u8FDB\u6765\u5982\u4E0B\u4F8B\u5B50\n      // const test = reactive({ a: 1,b:2,c:3,d:4,e:5 });\n      // effect(() => {\n      //   if(test.a === 1){\n      //     console.log(test.b)\n      //     console.log(test.c)\n      //     console.log(test.d)\n      //   }else{\n      //     console.log(test.e))\n      //   }\n      // })\n      // setTimeout(() => {\n      //   test.a = 0\n      // }, 2000);\n      //\u7531\u4E8E\u7B2C\u4E00\u6B21effect\u91CC\u6709\u56DB\u4E2Adep\u5206\u522B\u4E3Aa,b,c,d \u7B2C\u4E8C\u6B21\u53EA\u6709a,e\u6240\u4EE5\u7B2C\u4E8C\u6B21\u505A\u5B8C\u9700\u8981\u5C06\u4E0A\u4E00\u6B21\u7684dep\u5220\u9664 \u4FDD\u6301\u53CC\u5411\u8BB0\u5FC6\u91CC\u90FD\u662F\u6700\u65B0\u7684\n      afterClean(this);\n      activeEffect = this.parent;\n    }\n  }\n  get dirty() {\n    return this._dirtyLevel === DirtyLevels.Dirty;\n  }\n  set dirty(value: boolean) {\n    this._dirtyLevel = value ? DirtyLevels.Dirty : DirtyLevels.NotDirty;\n  }\n}\n//\u6BCF\u4E00\u6B21\u51FD\u6570\u6267\u884C\u505A\u7684\u6E05\u7406\u5DE5\u4F5C\nfunction preClean(effect: ReactiveEffect) {\n  effect._trackId++;\n  //\u6BCF\u4E00\u6B21\u6267\u884C\u9700\u8981\u5C06trackId++ \u7528\u4E8E\u5C06\u540C\u4E00\u4E2Aeffect\u89E6\u53D1\u591A\u4E2A\u76F8\u540Cdep\u65F6\u5019\u9700\u8981\u53BB\u91CD\n  // effect(() => {\n  //   state.name;\n  //   state.name;\n  //   //\u7531\u4E8E\u662F\u540C\u4E00\u4E2Aeffect \u6240\u4EE5\u4E0D\u9700\u8981\u89E6\u53D1 \u4E0D\u9700\u8981\u5B58\u5728dep \u53EF\u4EE5\u901A\u98CEtrackId\u533A\u5206\n  // })\n  // effect(() => {\n  //   state.name;\n  //   effect(() => {\n  //     state.name;   //\u8FD9\u6837\u5C31\u8981\u5C06\u8FD9\u4E2Aeffect\u63A8\u5165\u5230\u5F53\u524D\u7684dep\u56E0\u4E3Aeffect\u5E76\u4E0D\u76F8\u540C\n  //   })\n  // })\n  effect._depsLength = 0; //\u5C06\u8BE5\u503C\u91CD\u7F6E\u4E3A0 \u540E\u7EED\u5C06\u7528\u4E8E\u65B0\u8001dep\u6E05\u7A7A\n}\n//\u51FD\u6570\u7ED3\u675F\u5B8C\u505A\u7684\u6E05\u7406\u5DE5\u4F5C\nfunction afterClean(effect: ReactiveEffect): void {\n  if (effect._depsLength < effect._deps.length) {\n    for (let i = effect._depsLength; i < effect._deps.length; i++) {\n      cleanEffectDep(effect, effect._deps[i]);\n    }\n    effect._depsLength = effect._deps.length;\n  }\n}\n// const state = reactive({\n//   name:'1',\n//   pink:2\n// }\n// effect(() => {\n//   state.name;\n//   state.name; //\u4E0D\u5E94\u8BE5\u6536\u96C6\n// })\n//\u5C06effect\u548Cdep\u505A\u5173\u8054\nexport function trackEffect(effect: Exclude<activeEffect, void>, dep: Dep) {\n  if (!activeEffect) return;\n  if (dep.get(effect) !== effect._trackId) {\n    //\u5982\u679C\u8FD9\u4E2Adep\u91CC\u7684effect\u7684_trackId\u548C\u5F53\u524Deffect\u7684_trackId\u4E0D\u76F8\u7B49\u8BF4\u660E\u8FD9\u4E2Aeffect\u6CA1\u6709\u76D1\u542C\u8FC7\u8FD9\u4E2Adep\n    dep.set(effect, effect._trackId);\n    const oldDep = effect._deps[effect._depsLength];\n    if (oldDep === dep) {\n      effect._depsLength++;\n    } else {\n      oldDep && cleanEffectDep(effect, oldDep);\n      effect._deps[effect._depsLength++] = dep;\n    }\n    //\u5982\u679C\u65B0\u7684\u548C\u65E7\u7684\u4E00\u6837\u90A3\u5C31\u4FDD\u7559 \u4E0D\u4E00\u6837\u5C31\u5220\u9664\n    //\u5373\u4E0B\u9762\u6BCF\u4E00\u6B21\u5E94\u8BE5\u662F{name:depMap,pink:depMap} -> {name:depMap,address:depMap}\u800C\u4E0D\u662F{name:depMap,pink:depMap,address:depMap}\n    // effect(() => {\n    //   const a = state.name ? state.pink : state.address;\n    // });\n    // setTimeout(() => {\n    //   state.name = 0;\n    // }, 2000);\n    //\u901A\u8FC7effect\u53BB\u627Edep \u6211\u4EEC\u53EF\u4EE5\u505A\u4E2A\u7B80\u5355\u7684\u5BF9\u6BD4\n    // {flag,name}\n    // {flag,address}\n    //\u56E0\u4E3A\u5927\u90E8\u5206\u65F6\u5019\u4EE3\u7801\u4ECE\u4E0A\u5230\u4E0B\u6267\u884C\u987A\u5E8F\u4E0D\u53D8\u6240\u4EE5\u53EF\u4EE5\u901A\u8FC7\u6570\u7EC4\u987A\u5E8F\u5373\u53EF\n  }\n}\n//\u79FB\u9664dep\u91CC\u7684effect\nfunction cleanEffectDep(effect: activeEffect, dep: Dep) {\n  //\u8981\u4ECEoldDEP\u79FB\u9664effect\n  dep.delete(effect);\n  if (dep.size === 0) {\n    //\u5B58\u653E\u6BCF\u4E00\u4E2Aeffect \u5982\u679C\u4F9D\u8D56\u91CC\u6CA1\u6709\u957F\u5EA6\u4E86\u5C31\u5C06\u6240\u6709\u7684\u79FB\u9664\n    dep.cleanup();\n  }\n}\nexport function effect(fn: () => void, options?: ReactiveEffectOptions) {\n  const _effect = new ReactiveEffect(fn, () => {\n    _effect._run();\n  });\n  if (options) {\n    //\u5C06\u4F20\u5165\u7684\u505A\u5408\u5E76\u8FD9\u6837\u53EF\u4EE5\u66FF\u4EE3\u539F\u6709\u7684schedule\n    Object.assign(_effect, options);\n  }\n  _effect._run();\n  const runner = _effect._run.bind(_effect) as any;\n  runner._effect = _effect;\n  return runner;\n}\n", "export function isObject(value: any): boolean {\n  return typeof value === \"object\" && value != null;\n}\nexport function isFunction(value: any): boolean {\n  return typeof value === \"function\";\n}\n", "export class Dep {\n  private map: Map<any, any>;\n  public cleanup: () => void;\n  public name: PropertyKey;\n\n  constructor(cleanup: () => void, key: PropertyKey) {\n    this.map = new Map();\n    this.cleanup = cleanup;\n    this.name = key;\n  }\n\n  get size() {\n    return this.map.size;\n  }\n\n  set(key: any, value: any) {\n    this.map.set(key, value);\n  }\n  delete(key: any) {\n    this.map.delete(key);\n  }\n\n  get(key: any) {\n    return this.map.get(key);\n  }\n\n  keys() {\n    return this.map.keys();\n  }\n}\nexport function createDep(cleanup: () => void, key: PropertyKey): Dep {\n  return new Dep(cleanup, key);\n}\n", "import { activeEffect, trackEffect, reactiveEffectMap, effect } from \"./effect\";\nimport { Dep, createDep } from \"./Dep\";\nimport { DirtyLevels } from \"./constants\";\nexport function track(target: object, key: PropertyKey) {\n  //\u53EA\u5728effect\u51FD\u6570\u91CC\u6536\u96C6\u4F9D\u8D56\u5373activeEffect\u4E0D\u4E3A\u7A7A\n  if (!activeEffect) return;\n  let depsMap = reactiveEffectMap.get(target);\n  if (!depsMap) {\n    reactiveEffectMap.set(target, (depsMap = new Map()));\n  }\n  let dep = depsMap.get(key);\n  if (!dep) {\n    depsMap.set(key, (dep = createDep(() => depsMap.delete(key), key)));\n  }\n  trackEffect(activeEffect, dep);\n  // const target =\n  // //\u9700\u8981\u6784\u5EFA\u4E00\u4E2Amap\u7531\u4E8E\u6536\u96C6\u4F9D\u8D56\n  // {\n  //     {name:1,iphone:2}:{\n  //         name:{\n  //             effect\n  //         },\n  //         key2:{\n  //             effect\n  //         }\n  //     }\n  // }\n  //\u9700\u8981\u5C06effect\u548Cdep\u505A\u5173\u8054 \u8FD9\u6837\u5F53\u76F8\u5173\u7684dep\u6539\u53D8 \u5C31\u53EF\u4EE5\u53BB\u627E\u5230effect\u6267\u884C\n  // name\u6539\u53D8\u5C31\u8981\u53BB\u89E6\u53D1effect\n}\n\nexport function trigger(target: object, key: PropertyKey) {\n  const depsMap = reactiveEffectMap.get(target); //\u4ECEreactiveEffectMap\u91CC\u83B7\u53D6\u5BF9\u5E94\u7684dep\n  if (!depsMap) return;\n  const dep = depsMap.get(key);\n  if (!dep) return;\n  triggerEffects(dep);\n}\nexport function triggerEffects(dep: Dep) {\n  for (const effect of dep.keys()) {\n    if (effect._dirtyLevel <= DirtyLevels.Dirty) {\n      //\u6BCF\u6B21\u6267\u884C\u9700\u8981\u5C06\u4E4B\u524D\u7684dirty\u53D8\u6210\u810F\u7684\n      effect._dirtyLevel = DirtyLevels.Dirty;\n    }\n    if (!effect.isRunning) {\n      effect.scheduler && effect.scheduler();\n    }\n  }\n}\n", "import { track, trigger } from \"./track\";\nimport { isObject } from \"@mini-vue/shared\";\nimport { reactive } from \"./reactive\";\nimport { ReactiveFlags } from \"./constants\";\nexport const baseHandler = {\n  get(target: object, key: PropertyKey, receiver: any): any {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return true;\n    }\n    track(target, key);\n    let res = Reflect.get(target, key, receiver);\n    if (isObject(res)) {\n      return reactive(res);\n    }\n    return res;\n  },\n  set(\n    target: Record<PropertyKey, any>,\n    key: PropertyKey,\n    value: any,\n    receiver: any\n  ): boolean {\n    const oldValue = target[key];\n    Reflect.set(target, key, value, receiver); //\u9700\u8981\u5148\u6267\u884C\u4E00\u6B21\u4E0D\u7136effect\u6267\u884C\u65F6\u5019\u8FD8\u662F\u4E0A\u4E00\u6B21\u7684\u503C\n    if (oldValue !== value) {\n      trigger(target, key);\n    }\n    return Reflect.set(target, key, value, receiver);\n  },\n};\n", "import { isObject } from \"@mini-vue/shared\";\nimport { baseHandler } from \"./baseHandler\";\nimport { ReactiveFlags } from \"./constants\";\nexport function reactive(raw: object) {\n  if (!isObject(raw)) {\n    return;\n  }\n  return createReactive(raw);\n}\nconst reactiveWeakMap = new WeakMap<object, any>();\nfunction createReactive<T extends object>(\n  obj: T & {\n    [ReactiveFlags.IS_REACTIVE]?: boolean;\n  }\n): T {\n  //\u9700\u8981\u4EE3\u7406\u8BE5\u5BF9\u8C61\n  if (reactiveWeakMap.has(obj)) {\n    //\u5982\u679C\u8BE5\u5BF9\u8C61\u88AB\u4EE3\u7406\u8FC7\u5219\u8FD4\u56DE\u4E4B\u524D\u7684\u4EE3\u7406\u5BF9\u8C61\n    return reactiveWeakMap.get(obj);\n  }\n  if (obj[ReactiveFlags.IS_REACTIVE]) {\n    return obj;\n  }\n  //   \u5982\u679C\u6539\u5BF9\u8C61\u5DF2\u7ECF\u662F\u4EE3\u7406\u8FC7\u7684\u5BF9\u8C61\u5C31\u76F4\u63A5\u8FD4\u56DE\n  const result = new Proxy(obj, baseHandler) as T;\n  //\u56E0\u4E3A\u5BF9\u8C61\u5982\u679C\u88AB\u4EE3\u7406\u9700\u8981\u8FD4\u56DE\u4E0A\u4E00\u6B21\u4EE3\u7406\u7684\u5BF9\u8C61\u6240\u4EE5\u9700\u8981\u5728\u6BCF\u4E00\u6B21\u5C06\u4EE3\u7406\u5BF9\u8C61\u5B58\u5230map\u91CC\u5982\u679C\u6709\u5C31\u76F4\u63A5\u8FD4\u56DE\n  reactiveWeakMap.set(obj, result);\n  return result;\n}\nexport function toReactive(value: any) {\n  return isObject(value) ? reactive(value) : value;\n}\nexport function isReactive(obj: any): boolean {\n  return obj[ReactiveFlags.IS_REACTIVE];\n}\n", "import { toReactive } from \"./reactive\";\nimport { activeEffect, trackEffect } from \"./effect\";\nimport { Dep, createDep } from \"./Dep\";\nimport { triggerEffects } from \"./track\";\nexport function ref(rawValue: any): RefImpl {\n  return createRef(rawValue);\n}\nclass RefImpl {\n  public _value: any;\n  public _dep: Dep | void = undefined;\n  public __v__isRef = true;\n  constructor(public rawValue: any) {\n    //rawValue\u4E3B\u8981\u662F\u4E3A\u4E86\u89E3\u51B3 \u4FEE\u6539\u65F6\u503C\u662F\u5426\u66F4\u65B0\n    this._value = toReactive(rawValue); //\u8FD9\u4E2A_value\u662F\u8981\u88AB\u4EE3\u7406\u7684\n  }\n  get value() {\n    activeEffect && trackRefValue(this);\n    return this._value;\n  }\n  set value(newValue: any) {\n    if (this.rawValue !== newValue) {\n      this._value = newValue;\n      this.rawValue = newValue;\n      triggerRefValue(this);\n    }\n  }\n}\n//\u6536\u96C6ref\u4F9D\u8D56\nexport function trackRefValue(ref: { _dep: Dep | void }) {\n  activeEffect &&\n    trackEffect(\n      activeEffect,\n      ref._dep ||\n        (ref._dep = createDep(() => (ref._dep = undefined), `undefined`))\n      //\u7531\u4E8Eref\u548Creactive\u7684\u4E3B\u8981\u4E0D\u540C\u5C31\u662Fref:ref(false) reactive:{name:a,b:c} \u6240\u4EE5ref\u4E0D\u50CFreactive\u90A3\u6837\u9700\u8981\u4F7F\u7528reactiveEffectMap\u901A\u8FC7key\u53BB\u62FF\u5230\u4E0D\u540C\u7684dep \u4ED6\u5C31\u76F4\u63A5\u5728\u5B9E\u4F8B\u4E0A\u81EA\u8EAB\u521B\u5EFA\u4E00\u4E2Adep\u5373\u53EF\n    );\n  // activeEffect &&\n  //   trackEffect(\n  //     activeEffect,\n  //     (ref._dep = createDep(\n  //       () => (ref._dep = undefined),\n  //       `undefined${index++}`\n  //     ))\n  //     //\u7531\u4E8Eref\u548Creactive\u7684\u4E3B\u8981\u4E0D\u540C\u5C31\u662Fref:ref(false) reactive:{name:a,b:c} \u6240\u4EE5ref\u4E0D\u50CFreactive\u90A3\u6837\u9700\u8981\u4F7F\u7528reactiveEffectMap\u901A\u8FC7key\u53BB\u62FF\u5230\u4E0D\u540C\u7684dep \u4ED6\u5C31\u76F4\u63A5\u5728\u5B9E\u4F8B\u4E0A\u81EA\u8EAB\u521B\u5EFA\u4E00\u4E2Adep\u5373\u53EF\n  //   );\n  //\u8FD9\u6837\u5199\u4F1A\u5BFC\u81F4\u6BCF\u6B21\u90FD\u4F1A\u521B\u5EFA\u65B0\u7684\u4E00\u4E2Adep\n  //1.\u5F53\u6211\u4EEC\u5728trackEffect\u65F6\u5019\u7531\u4E8E\u4F1A\u6BD4\u8F83\u65B0\u8001dep\u5982\u679C\u4E0D\u4E00\u81F4\u5C31\u4F1A\u505A\u4E00\u6B21\u5220\u9664\n  //2.\u7531\u4E8Eref\u7684\u7279\u6B8Adep\u53EA\u4F1A\u6709\u4E00\u9879\u6240\u4EE5\u5F53\u6267\u884CcleanEffectDep\u65F6\u5019\u5220\u9664\u4E86\u4E00\u9879 \u770B\u5230dep\u4E3A\u7A7A\u5C31\u4F1A\u5C06ref._dep\u5C5E\u6027\u7F6E\u4E3Aundefined(ref\u662F\u540C\u4E00\u4E2A\u5F15\u7528)\n  //3.\u540E\u7EED\u89E6\u53D1triggerRefValue\u65F6\u7531\u4E8Eref._dep\u4E3Aundefined\u6240\u4EE5\u540E\u7EED\u4E00\u76F4\u4E0D\u6267\u884C\u5BFC\u81F4\u4E86watch\u53EA\u89E6\u53D1\u4E00\u6B21\n}\n//\u89E6\u53D1ref\u4F9D\u8D56\nexport function triggerRefValue(ref: { _dep: Dep | void }) {\n  ref._dep && triggerEffects(ref._dep);\n}\nfunction createRef(rawValue: any): RefImpl {\n  return new RefImpl(rawValue);\n}\n//toRef\nexport function toRef(obj: object, key: PropertyKey) {\n  return new ObjectRefImpl(obj, key);\n}\nexport function toRefs(obj: object) {\n  let res: Record<PropertyKey, any> = {};\n  for (const [key, value] of Object.entries(obj)) {\n    res[key] = toRef(obj, key);\n  }\n  return res;\n}\nexport function proxyRefs(object: Record<PropertyKey, any>) {\n  return new Proxy(object, {\n    get(target, key, receiver) {\n      //\u5982\u679C\u662Fref\u5C31\u53BB\u8BFB\u53D6ref.value\u4E0D\u662F\u7684\u8BDD\u5C31\u6B63\u5E38\n      const r = Reflect.get(target, key, receiver);\n      return r.__v__isRef ? r.value : r;\n    },\n    set(target, key, value, receiver) {\n      const oldValue: any = target[key];\n      if (oldValue.__v__isRef) {\n        oldValue.value = value;\n        return true;\n      } else {\n        return Reflect.set(target, key, value, receiver);\n      }\n    },\n  });\n}\nclass ObjectRefImpl {\n  public __v__isRef = true;\n  constructor(public raw: Record<PropertyKey, any>, public key: PropertyKey) {}\n  get value() {\n    return this.raw[this.key];\n  }\n  set value(newValue: any) {\n    this.raw[this.key] = newValue;\n  }\n}\nexport function isRef(obj: any): boolean {\n  return obj.__v__isRef;\n}\n", "import { activeEffect, ReactiveEffect } from \"./effect\";\nimport { isFunction } from \"@mini-vue/shared\";\nimport { Dep } from \"./Dep\";\nimport { trackRefValue, triggerRefValue } from \"./ref\";\nexport function computed(getterOrOptions: { get: any; set: any }) {\n  //\u56E0\u4E3A\u6709\u4E24\u79CD\u60C5\u51B5 \u4E00\u79CD\u662F\u4F20\u5165get\u548Cset \u53E6\u5916\u4E00\u79CD\u662F\u4F20\u5165\u4E00\u4E2A\u51FD\u6570 \u5176\u5B9E\u8FD9\u4E2A\u51FD\u6570\u5C31\u662Fget\u6240\u4EE5\u6211\u4EEC\u505A\u4E00\u6B21\u53C2\u6570\u5F52\u4E00\u5316\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n    setter = () => {};\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  return new ComputedRefImpl(getter, setter);\n}\nclass ComputedRefImpl {\n  public _value: any;\n  public _effect: activeEffect = undefined;\n  public _dep: Dep | void = undefined;\n  constructor(\n    getter: (value: any) => any,\n    public setter: (value: any) => void\n  ) {\n    this._effect = new ReactiveEffect(\n      () => getter(this.value),\n      () => {\n        triggerRefValue(this); //\u6BCF\u6267\u884C\u4E00\u6B21\u90FD\u9700\u8981\u9700\u8981\u5C06\u503C\u8BBE\u7F6E\u4E3A\u810F\n      }\n    );\n  }\n  get value() {\n    console.log(this._effect?.dirty, \"dirty\");\n    if (this._effect?.dirty) {\n      //\u5982\u679C\u662F\u810F\u7684\u5C31\u6267\u884C\u4E00\u6B21\n      this._value = this._effect._run(); //\u6BCF\u4E00\u6B21\u7ED3\u679C\u5C31\u662F\u4F20\u8FDB\u6765\u51FD\u6570\u7684\u8FD4\u56DE\u503C\n      trackRefValue(this); //\u6536\u96C6\u4F9D\u8D56\n    }\n    return this._value;\n  }\n  set value(v) {\n    // return true;\n    this.setter(v);\n  }\n}\n// const state = reactive({ name: 1 });\n// const name = computed(() => \"111\" + state.name);\n// console.log(name.value);\n// effect(() => {\n//   console.log(name.value);\n// });\n//computed\u5B9E\u73B0\n//\u9996\u5148computed\u9700\u8981dirty\u5C5E\u6027\u8FDB\u884C\u63A7\u5236\u5982\u679C\u503C\u662Ftrue\u5373\u4E3A\u810F\u503C\u5C31\u91CD\u65B0\u6E32\u67D3\u4E00\u6B21(\u5373\u6267\u884C\u4E00\u904D\u4F20\u8FDB\u6765\u7684\u51FD\u6570) \u6267\u884C\u5B8C\u9700\u8981\u5C06\u8BE5\u503C\u53D8\u56DEfalse\n//\n", "//watch\u4F7F\u7528\n//\u5F53\u4E00\u4E2A\u503C\u6539\u53D8\u540E\u4F1A\u6267\u884C\u4F20\u5165\u7684\u51FD\u6570\n\nimport { isFunction, isObject } from \"@mini-vue/shared\";\nimport { ReactiveEffect } from \"./effect\";\nimport { isReactive } from \"./reactive\";\nimport { isRef } from \"./ref\";\n\n//watch\u672C\u8D28\u4E5F\u662F\u4E2Aeffect \u4E3A\u4E86\u5C06\u5F53\u524D\u7684source\u548Ccallback\u5173\u8054\u8D77\u6765\u6211\u4EEC\u9700\u8981\u5C06source\u7684\u6BCF\u4E2A\u5C5E\u6027\u904D\u5386\u4E00\u4E0B \u8FD9\u6837\u5C31\u53EF\u4EE5\u901A\u8FC7reactiveEffect\u5173\u8054\u8D77\u6765\ntype watchOptions = {\n  deep?: boolean;\n  depth?: number;\n  immediate?: boolean;\n};\nexport function watch(\n  source: any,\n  callback: () => void,\n  options: watchOptions\n) {\n  doWatch(source, callback, options);\n}\nfunction doWatch(\n  source: any,\n  callback: (\n    oldValue: any,\n    newValue: any,\n    cleanup?: (fn: () => void) => void\n  ) => void,\n  { deep = false, depth = 0, immediate = false }: watchOptions\n) {\n  let getter;\n  if (isReactive(source)) {\n    getter = () =>\n      traves(source, (depth = deep ? (depth ? depth : Infinity) : 1), 0);\n  } else if (isRef(source)) {\n    //\u5C31\u8BBF\u95EE.value\n    console.log(\"ref\");\n    getter = () => source.value;\n  } else if (isFunction(source)) {\n    //\u5982\u679C\u51FD\u6570\u7684\u8BDD\u51FD\u6570\u5C31\u662F\u90A3\u4E2Agetter\n    getter = source;\n  } else {\n    return;\n  }\n  let oldValue: any;\n  let clean: void | (() => void);\n  //\u5982\u679C\u662F\u5F53\u54CD\u5E94\u5F0F\u624D\u53EF\u4EE5\u8FDB\u884C\u76D1\u542C cleanup\u63A5\u53D7fn \u6BCF\u4E00\u6B21\u6267\u884C\u90FD\u4F1A\u8C03\u7528\u4E00\u6B21fn\n  const cleanup = (fn: () => void) => {\n    clean = () => {\n      fn();\n      clean = undefined;\n    };\n  };\n  const job = () => {\n    const newValue = effect._run();\n    clean && clean();\n    callback(newValue, oldValue, cleanup);\n    oldValue = newValue;\n  };\n\n  const effect = new ReactiveEffect(getter, () => {\n    job();\n  });\n\n  if (immediate) {\n    job();\n  } else {\n    oldValue = effect._run();\n  }\n}\n//\u904D\u5386\u5BF9\u8C61\u6BCF\u4E2A\u5C5E\u6027 \u8FD9\u6837\u5C31\u4F1A\u89E6\u53D1get\u4ECE\u800C\u5C06\u5C5E\u6027\u548C\u5F53\u524D\u7684effect\u5173\u8054\u8D77\u6765\nfunction traves(\n  source: any,\n  depth: number,\n  currentDepth: number = 0,\n  seen: Set<object> = new Set()\n) {\n  if (!isObject(source)) {\n    return source;\n  }\n  if (depth) {\n    //\u5982\u679C\u9700\u8981\u904D\u5386\u90A3\u5C31\u9012\u5F52\n    if (currentDepth >= depth) {\n      //\u5982\u679CcurrentDepth\u503C\u5927\u4E8Edepth\u5C31\u76F4\u63A5\u8FD4\u56DE\u4E0D\u5728\u904D\u5386\u5B50\u96C6\n      return source;\n    }\n    currentDepth++;\n  }\n  //\u4E3A\u4E86\u9632\u6B62\u5FAA\u73AF\u5F15\u7528\u6BCF\u6B21\u5C06\u5C5E\u6027\u6DFB\u52A0\u5230seen\u91CC\u5982\u679C\u6709\u7684\u8BDD\u76F4\u63A5\u8FD4\u56DEsource\u5373\u53EF\n  if (seen.has(source)) {\n    return source;\n  } else {\n    seen.add(source);\n  }\n  for (const key in source) {\n    traves(source[key], depth, currentDepth, seen);\n  }\n  return source;\n}\n", "//\u8282\u70B9\u64CD\u4F5C\nexport default {\n  //\u63D2\u5165\u8282\u70B9\n  insert: (el: HTMLElement, parent: HTMLElement, anchor: HTMLElement) => {\n    parent.insertBefore(el, anchor || null);\n    //\u5982\u679Canchor\u4E3Anull\u5219\u63D2\u5165\u5230\u672B\u5C3E \u5373\u7B49\u540C\u4E8Eparent.appendChild(el)\n  },\n  //\u79FB\u9664\u8282\u70B9\n  remove: (el: HTMLElement) => {\n    const parent = el.parentNode;\n    parent && parent.removeChild(el);\n  },\n  //\u521B\u5EFA\u5143\u7D20\n  createElement: (type: keyof HTMLElementTagNameMap) =>\n    document.createElement(type),\n  //\u521B\u5EFA\u6587\u672C\n  createText: (type: string) => document.createTextNode(type),\n  //\u8BBE\u7F6E\u6587\u672C\n  setText: (node: HTMLElement, text: string) => (node.nodeValue = text),\n  //\u8BBE\u7F6E\u5143\u7D20\u6587\u672C\n  setElementText: (node: HTMLElement, text: string) =>\n    (node.textContent = text),\n  //\u83B7\u53D6\u7236\u8282\u70B9\n  parentNode: (node: HTMLElement) => node.parentNode,\n  //\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\n  nextSibling: (node: HTMLElement) => node.nextSibling,\n};\n", "export default function patchAttr(el: HTMLElement, key: string, value: string) {\n  if (value === null) {\n    //\u5982\u679C\u5F53\u524D\u662F\u7A7A\u5C31\u5C06\u4E4B\u524D\u7684\u5168\u90E8\u79FB\u9664\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, value);\n  }\n}\n", "export default function patchClass(el: HTMLElement, value: string) {\n  //\u5982\u679C\u662F\u65B0\u7684\u5219\u5168\u90E8\u751F\u6548\n  if (value === null) {\n    el.removeAttribute(\"class\");\n  } else {\n    el.className = value;\n  }\n}\n", "function createInvoker(value: () => void) {\n  const invoker: any = (e: any) => invoker.value(e);\n  invoker.value = value;\n  return invoker;\n}\nexport default function patchEvent(\n  el: HTMLElement & { _vei?: Record<PropertyKey, any> },\n  eventName: `on${keyof HTMLElementEventMap}`,\n  value: () => void\n) {\n  //\u5728\u8BE5\u5143\u7D20\u4E0A\u521B\u5EFA\u4E2Amap\n  const invokers = el._vei || (el._vei = {});\n  const name = eventName.slice(2).toLowerCase() as keyof HTMLElementEventMap;\n  const existing = invokers[name];\n  //1.\u5982\u679C\u4E4B\u524D\u6709\u8BE5\u4E8B\u4EF6\u73B0\u5728\u4E5F\u6709\u5C31\u66FF\u6362\n  if (existing && value) {\n    return (existing.value = value);\n  }\n  if (value) {\n    //\u5982\u679C\u4E4B\u524D\u6CA1\u6709\u8BE5\u4E8B\u4EF6\u73B0\u5728\u6709\u5C31\u6DFB\u52A0\n    const invoker = createInvoker(value);\n    invokers[name] = invoker;\n    el.addEventListener(name, invoker);\n    return;\n  }\n  //2.\u5982\u679C\u4E4B\u524D\u6709\u8BE5\u4E8B\u4EF6\u73B0\u5728\u6CA1\u6709\u5C31\u5220\u9664\n  if (existing) {\n    el.removeEventListener(name, existing);\n    return;\n  }\n}\n", "export default function patchStyle(el: HTMLElement, prev: any, next: any) {\n  const style = el.style;\n  if (next) {\n    for (let key in next) {\n      style[key as any] = next[key];\n    }\n  }\n  if (prev) {\n    for (let key in prev) {\n      if (next[key] == null) {\n        style[key as any] = \"\";\n      }\n    }\n  }\n}\n", "import patchAttr from \"./modules/patchAttr\";\nimport patchClass from \"./modules/patchClass\";\nimport patchEvent from \"./modules/patchEvent\";\nimport patchStyle from \"./modules/patchStyle\";\n\n//\u7528\u6765\u5904\u7406dom class style event\nexport default function patchProps(\n  el: HTMLElement,\n  key: string,\n  preValue: any,\n  nextValue: any\n) {\n  //\u6839\u636E\u4E0D\u540C\u7684key\u5904\u7406\n  if (key === \"class\") {\n    return patchClass(el, nextValue);\n  } else if (key === \"style\") {\n    return patchStyle(el, preValue, nextValue);\n  } else if (/^on[A-Z]/.test(key)) {\n    return patchEvent(el, key as `on${keyof HTMLElementEventMap}`, nextValue);\n  } else {\n    return patchAttr(el, key, nextValue);\n  }\n}\n", "export * from \"@mini-vue/reactivity\";\nimport nodeOps from \"./nodeOps\";\nimport patchProp from \"./patchProps\";\nexport const renderOptions = Object.assign({ patchProp }, nodeOps);\n"],
  "mappings": "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",
  "names": ["effect", "effect", "ref", "effect"]
}
