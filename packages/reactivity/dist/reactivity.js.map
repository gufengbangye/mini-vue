{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["//\u7528\u4E8E\u540E\u7EED\u5C06\u5F53\u524D\u7684effect\u548C\u540E\u7EED\u54CD\u5E94\u5F0F\u6570\u636E\u7684\u6539\u53D8\u5173\u8054\u8D77\u6765\nexport let activeEffect: void | (() => void); //\u8054\u5408\u7C7B\u578B\u91CC\u51FD\u6570\u9700\u8981\u88AB\u62EC\u53F7\u62EC\u8D77\u6765\nclass ReactiveEffect {\n  constructor(private fn: () => void) {} //\u4F1A\u88AB\u8F6C\u5316\u4E3Aconstructor(){this.fn = fn}\n  _run() {\n    //\u5F53\u524D\u4EE3\u7801\u6709\u4E2A\u95EE\u9898\u5C31\u662F\u5F53\u5D4C\u5957\u7684effect\u4F1A\u51FA\u73B0\u95EE\u9898\n    //\u4EE3\u7801\u4F8B\u5B50\n    // import { reactive, effect } from \"./reactivity.js\";\n    // const target = {\n    //   name: 1,\n    //   pink: 2,\n    //   address: 3,\n    // };\n    // const state = reactive(target);\n    // effect(() => {\n    //   console.log(state.name); //\u5F53\u524DactiveEffect\u5BF9\u5E94\u7684\u662F\u5F53\u524D\u7684effect\n    //     effect(() => {\n    //   console.log(state.address);//\u5F53\u524DactiveEffect\u5BF9\u5E94\u7684\u662F\u5F53\u524D\u7684effect\u4F46\u662F\u6267\u884C\u5B8C\u8FD9\u53E5activeEffect\u4F1A\u53D8\u6210undefined\n    // })\n    //   console.log(state.pink); //\u8FD9\u4E2A\u65F6\u5019\u8FD9\u4E2A\u91CC\u5BF9\u5E94\u7684activeEffect\u4E3Aundefined\n    // });\n\n    activeEffect = this.fn;\n    this.fn();\n    activeEffect = void 0;\n  }\n}\nexport function effect(fn: () => void) {\n  const _effect = new ReactiveEffect(fn);\n  _effect._run();\n}\n", "export function isObject(value: any): boolean {\n  return typeof value === \"object\" && value != null;\n}\nconsole.log(1);\n", "export const baseHandler = {\n  get(target: object, key: PropertyKey, receiver: any): any {\n    console.log(\"\u89E6\u53D1\u4EE3\u7406\");\n    return Reflect.get(target, key, receiver);\n  },\n  set(target: object, key: PropertyKey, value: any, receiver: any): boolean {\n    return Reflect.set(target, key, value, receiver);\n  },\n};\n\nexport const reactiveFlagType = {\n  IS_REACTIVE: \"__v_isReactive\",\n};\n", "import { isObject } from \"@mini-vue/shared\";\nimport { baseHandler, reactiveFlagType } from \"./baseHandler\";\nexport function reactive(raw: object) {\n  if (!isObject(raw)) {\n    return;\n  }\n  return createReactive(raw);\n}\nconst reactiveWeakMap = new WeakMap<object, any>();\nfunction createReactive<T extends object>(\n  obj: T\n): T & {\n  IS_REACTIVE?: typeof reactiveFlagType.IS_REACTIVE;\n} {\n  //\u9700\u8981\u4EE3\u7406\u8BE5\u5BF9\u8C61\n  if (reactiveWeakMap.has(obj)) {\n    //\u5982\u679C\u8BE5\u5BF9\u8C61\u88AB\u4EE3\u7406\u8FC7\u5219\u8FD4\u56DE\u4E4B\u524D\u7684\u4EE3\u7406\u5BF9\u8C61\n    return reactiveWeakMap.get(obj);\n  }\n  if (\n    (obj as { IS_REACTIVE?: typeof reactiveFlagType.IS_REACTIVE }).IS_REACTIVE\n  ) {\n    return obj;\n  }\n  //   \u5982\u679C\u6539\u5BF9\u8C61\u5DF2\u7ECF\u662F\u4EE3\u7406\u8FC7\u7684\u5BF9\u8C61\u5C31\u76F4\u63A5\u8FD4\u56DE\n  const result = new Proxy(obj, baseHandler) as T & {\n    IS_REACTIVE?: typeof reactiveFlagType.IS_REACTIVE;\n  };\n  result.IS_REACTIVE = reactiveFlagType.IS_REACTIVE;\n  //\u56E0\u4E3A\u5BF9\u8C61\u5982\u679C\u88AB\u4EE3\u7406\u9700\u8981\u8FD4\u56DE\u4E0A\u4E00\u6B21\u4EE3\u7406\u7684\u5BF9\u8C61\u6240\u4EE5\u9700\u8981\u5728\u6BCF\u4E00\u6B21\u5C06\u4EE3\u7406\u5BF9\u8C61\u5B58\u5230map\u91CC\u5982\u679C\u6709\u5C31\u76F4\u63A5\u8FD4\u56DE\n  reactiveWeakMap.set(obj, result);\n  return result;\n}\n"],
  "mappings": ";AACO,IAAI;AACX,IAAM,iBAAN,MAAqB;AAAA,EACnB,YAAoB,IAAgB;AAAhB;AAAA,EAAiB;AAAA;AAAA,EACrC,OAAO;AAkBL,mBAAe,KAAK;AACpB,SAAK,GAAG;AACR,mBAAe;AAAA,EACjB;AACF;AACO,SAAS,OAAO,IAAgB;AACrC,QAAM,UAAU,IAAI,eAAe,EAAE;AACrC,UAAQ,KAAK;AACf;;;AC9BO,SAAS,SAAS,OAAqB;AAC5C,SAAO,OAAO,UAAU,YAAY,SAAS;AAC/C;AACA,QAAQ,IAAI,CAAC;;;ACHN,IAAM,cAAc;AAAA,EACzB,IAAI,QAAgB,KAAkB,UAAoB;AACxD,YAAQ,IAAI,0BAAM;AAClB,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC1C;AAAA,EACA,IAAI,QAAgB,KAAkB,OAAY,UAAwB;AACxE,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACjD;AACF;AAEO,IAAM,mBAAmB;AAAA,EAC9B,aAAa;AACf;;;ACVO,SAAS,SAAS,KAAa;AACpC,MAAI,CAAC,SAAS,GAAG,GAAG;AAClB;AAAA,EACF;AACA,SAAO,eAAe,GAAG;AAC3B;AACA,IAAM,kBAAkB,oBAAI,QAAqB;AACjD,SAAS,eACP,KAGA;AAEA,MAAI,gBAAgB,IAAI,GAAG,GAAG;AAE5B,WAAO,gBAAgB,IAAI,GAAG;AAAA,EAChC;AACA,MACG,IAA8D,aAC/D;AACA,WAAO;AAAA,EACT;AAEA,QAAM,SAAS,IAAI,MAAM,KAAK,WAAW;AAGzC,SAAO,cAAc,iBAAiB;AAEtC,kBAAgB,IAAI,KAAK,MAAM;AAC/B,SAAO;AACT;",
  "names": []
}
